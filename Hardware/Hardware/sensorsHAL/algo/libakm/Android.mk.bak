LOCAL_PATH := $(call my-dir)

##########generate libcalmodule_akm32.so 32bits#######
include $(CLEAR_VARS)

AKMD_DEVICE_TYPE=9911

# Define Device
ifeq ($(AKMD_DEVICE_TYPE), 8975)
DEVICE_STRING=8975
LOCAL_CFLAGS := -DAKMD_AK8975
else ifeq ($(AKMD_DEVICE_TYPE), 8963)
DEVICE_STRING=8963
LOCAL_CFLAGS := -DAKMD_AK8963
else ifeq ($(AKMD_DEVICE_TYPE), 9912)
DEVICE_STRING=09912
LOCAL_CFLAGS := -DAKMD_AK09912
else ifeq ($(AKMD_DEVICE_TYPE), 9911)
DEVICE_STRING=09911
LOCAL_CFLAGS := -DAKMD_AK09911
else
$(error AKMD_DEVICE_TYPE is not defined)
endif

LOCAL_LDFLAGS += -L$(LOCAL_PATH)/libSmartCompass32 -lAK$(DEVICE_STRING)wPGplus32

LOCAL_C_INCLUDES += \
	$(LOCAL_PATH) \
	$(LOCAL_PATH)/libSmartCompass32 \
	hardware/qcom/sensors/

LOCAL_SRC_FILES += \
	AKMD_APIs32.c \
	FileIO32.c \
	Measure32.c \
	akm_wrapper32.c

LOCAL_CFLAGS += -DAKSC_DISABLE_D6D

## Enable ALOGE
#LOCAL_CFLAGS += -UNDEBUG
#LOCAL_CFLAGS += -DENABLE_AKMDEBUG=1
#LOCAL_CFLAGS += -DAKM_LOG_ENABLE
LOCAL_CFLAGS += -DENABLE_AKM_PG
LOCAL_CFLAGS += -DAKMD_DISABLE_DOEPLUS

LOCAL_MULTILIB := 32

LOCAL_MODULE_PATH_32 := $(TARGET_OUT_VENDOR)/lib
LOCAL_SHARED_LIBRARIES += liblog
LOCAL_MODULE:=libcalmodule_akm
LOCAL_MODULE_TAGS := optional
include $(BUILD_SHARED_LIBRARY)
##########generate libcalmodule_akm.so 64bits#######
include $(CLEAR_VARS)

AKMD_DEVICE_TYPE=9911

# Define Device
ifeq ($(AKMD_DEVICE_TYPE), 8975)
DEVICE_STRING=8975
LOCAL_CFLAGS := -DAKMD_AK8975
else ifeq ($(AKMD_DEVICE_TYPE), 8963)
DEVICE_STRING=8963
LOCAL_CFLAGS := -DAKMD_AK8963
else ifeq ($(AKMD_DEVICE_TYPE), 9912)
DEVICE_STRING=09912
LOCAL_CFLAGS := -DAKMD_AK09912
else ifeq ($(AKMD_DEVICE_TYPE), 9911)
DEVICE_STRING=09911
LOCAL_CFLAGS := -DAKMD_AK09911
else
$(error AKMD_DEVICE_TYPE is not defined)
endif

LOCAL_LDFLAGS += -L$(LOCAL_PATH)/libSmartCompass -lAK$(DEVICE_STRING)wPGplus64

LOCAL_C_INCLUDES += \
	$(LOCAL_PATH) \
	$(LOCAL_PATH)/libSmartCompass \
	hardware/qcom/sensors/

LOCAL_SRC_FILES += \
	AKMD_APIs.c \
	FileIO.c \
	Measure.c \
	akm_wrapper.c

LOCAL_CFLAGS += -DAKSC_DISABLE_D6D

## Enable ALOGE
#LOCAL_CFLAGS += -UNDEBUG
#LOCAL_CFLAGS += -DENABLE_AKMDEBUG=1
#LOCAL_CFLAGS += -DAKM_LOG_ENABLE
LOCAL_CFLAGS += -DENABLE_AKM_PG
LOCAL_CFLAGS += -DAKMD_DISABLE_DOEPLUS

$(warning --------------- $(NEED_CALIBRATION_AKM) ----------)
ifeq ($(NEED_CALIBRATION_AKM), true)
LOCAL_CFLAGS += -DAKM_CHARGE_CAL
endif

LOCAL_MULTILIB := 64

LOCAL_MODULE_PATH_64 := $(TARGET_OUT_VENDOR)/lib64
LOCAL_SHARED_LIBRARIES += liblog
LOCAL_MODULE:=libcalmodule_akm
LOCAL_MODULE_TAGS := optional
include $(BUILD_SHARED_LIBRARY)
